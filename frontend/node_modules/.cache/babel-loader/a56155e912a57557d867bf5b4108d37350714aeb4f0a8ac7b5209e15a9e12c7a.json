{"ast":null,"code":"var _jsxFileName = \"/Users/mandyng/fyp-app/src/components/landing-page/Explore.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport './Explore.css';\nimport { GOOGLE_MAPS_API_KEY } from '../../config/maps';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GOOGLE_MAPS_LIBRARIES = ['places', 'geometry'];\nfunction loadGoogleMaps(apiKey) {\n  if (!apiKey) {\n    return Promise.reject(new Error('Missing Google Maps API key (set in src/config/maps.js or .env)'));\n  }\n  if (window.google && window.google.maps) {\n    return Promise.resolve(window.google);\n  }\n  if (window._googleMapsPromise) {\n    return window._googleMapsPromise;\n  }\n  const script = document.createElement('script');\n  const libs = GOOGLE_MAPS_LIBRARIES.join(',');\n  script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&libraries=${libs}`;\n  script.async = true;\n  script.defer = true;\n  window._googleMapsPromise = new Promise((resolve, reject) => {\n    script.onload = () => resolve(window.google);\n    script.onerror = reject;\n  });\n  document.head.appendChild(script);\n  return window._googleMapsPromise;\n}\nconst DEFAULT_CENTER = {\n  lat: 1.2868108,\n  lng: 103.8545349\n}; // SG center-ish\nconst SEARCH_RADIUS_METERS = 1000;\nconst AMENITY_OPTIONS = [{\n  type: 'school',\n  label: 'Schools'\n}, {\n  type: 'hospital',\n  label: 'Hospitals'\n}, {\n  type: 'supermarket',\n  label: 'Supermarkets'\n}, {\n  type: 'restaurant',\n  label: 'Restaurants'\n}, {\n  type: 'cafe',\n  label: 'Cafes'\n}, {\n  type: 'bank',\n  label: 'Banks'\n}, {\n  type: 'atm',\n  label: 'ATMs'\n}, {\n  type: 'shopping_mall',\n  label: 'Shopping Malls'\n}, {\n  type: 'bus_station',\n  label: 'Bus Stations'\n}, {\n  type: 'subway_station',\n  label: 'MRT'\n}, {\n  type: 'gym',\n  label: 'Gyms'\n}, {\n  type: 'pharmacy',\n  label: 'Pharmacies'\n}];\nconst Explore = () => {\n  _s();\n  const [searchAddress, setSearchAddress] = useState('');\n  const [clickedAddress, setClickedAddress] = useState('');\n  const [isSearching, setIsSearching] = useState(false);\n  const [searchError, setSearchError] = useState('');\n  const [selectedAmenityTypes, setSelectedAmenityTypes] = useState(['school', 'supermarket', 'restaurant', 'bus_station', 'subway_station']);\n  const [amenities, setAmenities] = useState([]);\n  const [isLoadingAmenities, setIsLoadingAmenities] = useState(false);\n  const [amenitiesError, setAmenitiesError] = useState('');\n  const markerRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n  const geocoderRef = useRef(null);\n  const placesServiceRef = useRef(null);\n  const autocompleteRef = useRef(null);\n  const inputRef = useRef(null);\n  const lastLocationRef = useRef(null);\n\n  // Initialize Google Maps\n  useEffect(() => {\n    loadGoogleMaps(GOOGLE_MAPS_API_KEY).then(google => {\n      const mapDiv = document.getElementById('mapdiv');\n      if (!mapDiv) {\n        console.error('Map div not found');\n        return;\n      }\n      const map = new google.maps.Map(mapDiv, {\n        center: DEFAULT_CENTER,\n        zoom: 16,\n        mapTypeControl: false,\n        streetViewControl: false,\n        fullscreenControl: true\n      });\n      mapInstanceRef.current = map;\n      geocoderRef.current = new google.maps.Geocoder();\n      placesServiceRef.current = new google.maps.places.PlacesService(map);\n\n      // Map click -> reverse geocode + marker + amenities\n      map.addListener('click', e => {\n        const latLng = e.latLng;\n        placeMarker(latLng);\n        reverseGeocode(latLng);\n        fetchAmenities(latLng, selectedAmenityTypes);\n      });\n\n      // Autocomplete on input\n      if (inputRef.current) {\n        const autocomplete = new google.maps.places.Autocomplete(inputRef.current, {\n          componentRestrictions: {\n            country: 'sg'\n          },\n          fields: ['geometry', 'formatted_address', 'name']\n        });\n        autocompleteRef.current = autocomplete;\n        autocomplete.addListener('place_changed', () => {\n          const place = autocomplete.getPlace();\n          if (!place || !place.geometry || !place.geometry.location) return;\n          const latLng = place.geometry.location;\n          map.panTo(latLng);\n          map.setZoom(18);\n          placeMarker(latLng);\n          const address = place.formatted_address || place.name || '';\n          setClickedAddress(address);\n          setSearchAddress(address);\n          setSearchError(''); // Clear any previous errors\n          fetchAmenities(latLng, selectedAmenityTypes);\n        });\n      }\n    }).catch(err => {\n      console.error('Error loading Google Maps:', err);\n      setSearchError('Map failed to load. Please configure your Google Maps API key in src/config/maps.js or .env');\n    });\n  }, [selectedAmenityTypes]);\n  const placeMarker = latLng => {\n    const google = window.google;\n    if (!google || !mapInstanceRef.current) return;\n    if (markerRef.current) {\n      markerRef.current.setMap(null);\n      markerRef.current = null;\n    }\n    const marker = new google.maps.Marker({\n      position: latLng,\n      map: mapInstanceRef.current,\n      animation: google.maps.Animation.DROP\n    });\n    markerRef.current = marker;\n    lastLocationRef.current = latLng;\n  };\n  const reverseGeocode = latLng => {\n    const geocoder = geocoderRef.current;\n    if (!geocoder) return;\n    geocoder.geocode({\n      location: latLng\n    }, (results, status) => {\n      if (status === 'OK' && results && results.length) {\n        const result = results[0];\n        const address = result.formatted_address;\n        setClickedAddress(address);\n        setSearchAddress(address);\n        setSearchError(''); // Clear any previous errors\n        if (markerRef.current) {\n          const infowindow = new window.google.maps.InfoWindow({\n            content: `<div style=\\\"font-weight:600\\\">${address}</div>`\n          });\n          infowindow.open({\n            anchor: markerRef.current,\n            map: mapInstanceRef.current\n          });\n        }\n        // Now fetch amenities since validation passed\n        fetchAmenities(latLng, selectedAmenityTypes);\n      }\n    });\n  };\n  const nearbySearchOnce = (location, type) => {\n    return new Promise(resolve => {\n      placesServiceRef.current.nearbySearch({\n        location,\n        radius: SEARCH_RADIUS_METERS,\n        type\n      }, (results, status) => {\n        if (status === window.google.maps.places.PlacesServiceStatus.OK && results) {\n          resolve(results.slice(0, 10));\n        } else {\n          resolve([]);\n        }\n      });\n    });\n  };\n\n  // typesOverride allows using the latest types immediately (avoids stale state)\n  const fetchAmenities = async (latLng, typesOverride) => {\n    const activeTypes = Array.isArray(typesOverride) ? typesOverride : selectedAmenityTypes;\n    try {\n      setIsLoadingAmenities(true);\n      setAmenitiesError('');\n      const promises = activeTypes.map(t => nearbySearchOnce(latLng, t));\n      const results = await Promise.all(promises);\n      const flat = results.flat();\n      // Deduplicate by place_id\n      const uniqueMap = new Map();\n      for (const r of flat) {\n        if (!uniqueMap.has(r.place_id)) uniqueMap.set(r.place_id, r);\n      }\n      // Enrich with distance and primary type label\n      const google = window.google;\n      const enriched = Array.from(uniqueMap.values()).map(p => {\n        const distance = google && google.maps.geometry ? google.maps.geometry.spherical.computeDistanceBetween(latLng, p.geometry.location) : null;\n        return {\n          id: p.place_id,\n          name: p.name,\n          vicinity: p.vicinity,\n          rating: p.rating,\n          userRatingsTotal: p.user_ratings_total,\n          types: p.types,\n          location: p.geometry && p.geometry.location,\n          distance\n        };\n      });\n      // Sort by distance\n      enriched.sort((a, b) => (a.distance || Infinity) - (b.distance || Infinity));\n      setAmenities(enriched);\n    } catch (e) {\n      setAmenitiesError('Failed to load nearby amenities.');\n    } finally {\n      setIsLoadingAmenities(false);\n    }\n  };\n  const handleSearchAddress = async () => {\n    setSearchError('');\n    const google = window.google;\n    if (!google || !mapInstanceRef.current) {\n      setSearchError('Map not ready. Please wait a moment and try again.');\n      return;\n    }\n    if (!searchAddress.trim()) return;\n    setIsSearching(true);\n    try {\n      const geocoder = geocoderRef.current || new google.maps.Geocoder();\n      geocoderRef.current = geocoder;\n      geocoder.geocode({\n        address: `${searchAddress}, Singapore`\n      }, (results, status) => {\n        if (status === 'OK' && results && results.length) {\n          const result = results[0];\n          const latLng = result.geometry.location;\n          mapInstanceRef.current.panTo(latLng);\n          mapInstanceRef.current.setZoom(18);\n          placeMarker(latLng);\n          const address = result.formatted_address;\n          setClickedAddress(address);\n          setSearchAddress(address);\n          fetchAmenities(latLng, selectedAmenityTypes);\n        } else {\n          setSearchError('No results found for this address.');\n        }\n        setIsSearching(false);\n      });\n    } catch (err) {\n      setSearchError('Error searching address.');\n      setIsSearching(false);\n    }\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter') {\n      handleSearchAddress();\n    }\n  };\n  const toggleAmenity = type => {\n    setSelectedAmenityTypes(prev => {\n      const next = prev.includes(type) ? prev.filter(t => t !== type) : [...prev, type];\n      if (lastLocationRef.current) {\n        // Use the new selection immediately\n        fetchAmenities(lastLocationRef.current, next);\n      }\n      return next;\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"explore\",\n    id: \"intro\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"section-title\",\n      children: \"Explore Automated Valuations\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"explore-header\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"section-subtitle\",\n        children: \"Estimate the value of your property now\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"explore-types\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"type-pill\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"http://localhost:3845/assets/1f2c5cefac5c3b843f4e0ea23b4d6916bfbd2857.svg\",\n          alt: \"Commercial\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Commercial\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 280,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"type-pill\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"http://localhost:3845/assets/a6a567e6434a0a9b58b53865a5cf0064ee43d31b.svg\",\n          alt: \"Industrial\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Industrial\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"explore-grid\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"explore-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Address Search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 292,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"search-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              ref: inputRef,\n              type: \"text\",\n              className: \"search-input\",\n              placeholder: \"Search an address in Singapore (Google Places Autocomplete)\",\n              value: searchAddress,\n              onChange: e => {\n                setSearchAddress(e.target.value);\n                if (e.target.value === '') {\n                  setSearchError('');\n                  setClickedAddress('');\n                  setAmenities([]);\n                  if (markerRef.current) {\n                    markerRef.current.setMap(null);\n                    markerRef.current = null;\n                  }\n                }\n              },\n              onKeyPress: handleKeyPress,\n              disabled: isSearching\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 294,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"search-btn\",\n              onClick: handleSearchAddress,\n              type: \"button\",\n              disabled: isSearching || !searchAddress.trim(),\n              children: isSearching ? 'Searching...' : 'Search'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 315,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 13\n          }, this), searchError && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"search-error\",\n            children: searchError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 11\n        }, this), clickedAddress && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Selected Location\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"selected-address\",\n            children: clickedAddress\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-row two-cols\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Property Type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input like-input\",\n              children: \"Select Property Type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Floor Area\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input like-input\",\n              children: \"Enter Floor Area\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 339,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary\",\n            children: \"Predict Price\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"hint\",\n            children: \"Sign in to view full prediction and data insights.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 346,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"explore-image\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"mapdiv\",\n          style: {\n            height: '400px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"map-instructions\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\uD83E\\uDDED \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Nearby Amenities\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 352,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Click the map or use search to pick a location.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: /*#__PURE__*/_jsxDEV(\"small\", {\n              children: \"We\\u2019ll list nearby schools, transport, food, healthcare and more.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 354,\n              columnNumber: 16\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"amenities-panel\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"amenities-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: \"Nearby Amenities\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"amenity-filters\",\n              children: AMENITY_OPTIONS.map(opt => /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: `amenity-chip ${selectedAmenityTypes.includes(opt.type) ? 'active' : ''}`,\n                onClick: () => toggleAmenity(opt.type),\n                children: opt.label\n              }, opt.type, false, {\n                fileName: _jsxFileName,\n                lineNumber: 362,\n                columnNumber: 13\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 13\n          }, this), isLoadingAmenities && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"amenities-loading\",\n            children: \"Loading amenities\\u2026\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 375,\n            columnNumber: 15\n          }, this), amenitiesError && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"amenities-error\",\n            children: amenitiesError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 15\n          }, this), !isLoadingAmenities && !amenitiesError && amenities.length === 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"amenities-empty\",\n            children: \"Select a location to load nearby amenities.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 15\n          }, this), !isLoadingAmenities && amenities.length > 0 && /*#__PURE__*/_jsxDEV(\"ul\", {\n            className: \"amenities-list\",\n            children: amenities.map(a => /*#__PURE__*/_jsxDEV(\"li\", {\n              className: \"amenity-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"amenity-main\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"amenity-name\",\n                  children: a.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 390,\n                  columnNumber: 23\n                }, this), a.vicinity && /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"amenity-address\",\n                  children: a.vicinity\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 391,\n                  columnNumber: 38\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 389,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"amenity-meta\",\n                children: [typeof a.rating === 'number' && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"amenity-rating\",\n                  children: [\"\\u2605 \", a.rating.toFixed(1)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 395,\n                  columnNumber: 25\n                }, this), typeof a.distance === 'number' && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"amenity-distance\",\n                  children: [Math.round(a.distance), \" m\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 398,\n                  columnNumber: 25\n                }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n                  className: \"amenity-link\",\n                  href: `https://www.google.com/maps/place/?q=place_id:${a.id}`,\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\",\n                  children: \"Open in Maps\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 400,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 21\n              }, this)]\n            }, a.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 388,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 274,\n    columnNumber: 5\n  }, this);\n};\n_s(Explore, \"WeA2N4gJxvty2S7iHt+0X6o+8dI=\");\n_c = Explore;\nexport default Explore;\nvar _c;\n$RefreshReg$(_c, \"Explore\");","map":{"version":3,"names":["React","useEffect","useState","useRef","GOOGLE_MAPS_API_KEY","jsxDEV","_jsxDEV","GOOGLE_MAPS_LIBRARIES","loadGoogleMaps","apiKey","Promise","reject","Error","window","google","maps","resolve","_googleMapsPromise","script","document","createElement","libs","join","src","async","defer","onload","onerror","head","appendChild","DEFAULT_CENTER","lat","lng","SEARCH_RADIUS_METERS","AMENITY_OPTIONS","type","label","Explore","_s","searchAddress","setSearchAddress","clickedAddress","setClickedAddress","isSearching","setIsSearching","searchError","setSearchError","selectedAmenityTypes","setSelectedAmenityTypes","amenities","setAmenities","isLoadingAmenities","setIsLoadingAmenities","amenitiesError","setAmenitiesError","markerRef","mapInstanceRef","geocoderRef","placesServiceRef","autocompleteRef","inputRef","lastLocationRef","then","mapDiv","getElementById","console","error","map","Map","center","zoom","mapTypeControl","streetViewControl","fullscreenControl","current","Geocoder","places","PlacesService","addListener","e","latLng","placeMarker","reverseGeocode","fetchAmenities","autocomplete","Autocomplete","componentRestrictions","country","fields","place","getPlace","geometry","location","panTo","setZoom","address","formatted_address","name","catch","err","setMap","marker","Marker","position","animation","Animation","DROP","geocoder","geocode","results","status","length","result","infowindow","InfoWindow","content","open","anchor","nearbySearchOnce","nearbySearch","radius","PlacesServiceStatus","OK","slice","typesOverride","activeTypes","Array","isArray","promises","t","all","flat","uniqueMap","r","has","place_id","set","enriched","from","values","p","distance","spherical","computeDistanceBetween","id","vicinity","rating","userRatingsTotal","user_ratings_total","types","sort","a","b","Infinity","handleSearchAddress","trim","handleKeyPress","key","toggleAmenity","prev","next","includes","filter","className","children","fileName","_jsxFileName","lineNumber","columnNumber","alt","ref","placeholder","value","onChange","target","onKeyPress","disabled","onClick","style","height","opt","toFixed","Math","round","href","rel","_c","$RefreshReg$"],"sources":["/Users/mandyng/fyp-app/src/components/landing-page/Explore.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport './Explore.css';\nimport { GOOGLE_MAPS_API_KEY } from '../../config/maps';\n\nconst GOOGLE_MAPS_LIBRARIES = ['places', 'geometry'];\n\nfunction loadGoogleMaps(apiKey) {\n  if (!apiKey) {\n    return Promise.reject(new Error('Missing Google Maps API key (set in src/config/maps.js or .env)'));\n  }\n  if (window.google && window.google.maps) {\n    return Promise.resolve(window.google);\n  }\n  if (window._googleMapsPromise) {\n    return window._googleMapsPromise;\n  }\n  const script = document.createElement('script');\n  const libs = GOOGLE_MAPS_LIBRARIES.join(',');\n  script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&libraries=${libs}`;\n  script.async = true;\n  script.defer = true;\n  window._googleMapsPromise = new Promise((resolve, reject) => {\n    script.onload = () => resolve(window.google);\n    script.onerror = reject;\n  });\n  document.head.appendChild(script);\n  return window._googleMapsPromise;\n}\n\nconst DEFAULT_CENTER = { lat: 1.2868108, lng: 103.8545349 }; // SG center-ish\nconst SEARCH_RADIUS_METERS = 1000;\n\nconst AMENITY_OPTIONS = [\n  { type: 'school', label: 'Schools' },\n  { type: 'hospital', label: 'Hospitals' },\n  { type: 'supermarket', label: 'Supermarkets' },\n  { type: 'restaurant', label: 'Restaurants' },\n  { type: 'cafe', label: 'Cafes' },\n  { type: 'bank', label: 'Banks' },\n  { type: 'atm', label: 'ATMs' },\n  { type: 'shopping_mall', label: 'Shopping Malls' },\n  { type: 'bus_station', label: 'Bus Stations' },\n  { type: 'subway_station', label: 'MRT' },\n  { type: 'gym', label: 'Gyms' },\n  { type: 'pharmacy', label: 'Pharmacies' },\n];\n\nconst Explore = () => {\n  const [searchAddress, setSearchAddress] = useState('');\n  const [clickedAddress, setClickedAddress] = useState('');\n  const [isSearching, setIsSearching] = useState(false);\n  const [searchError, setSearchError] = useState('');\n\n  const [selectedAmenityTypes, setSelectedAmenityTypes] = useState(\n    ['school', 'supermarket', 'restaurant', 'bus_station', 'subway_station']\n  );\n  const [amenities, setAmenities] = useState([]);\n  const [isLoadingAmenities, setIsLoadingAmenities] = useState(false);\n  const [amenitiesError, setAmenitiesError] = useState('');\n\n  const markerRef = useRef(null);\n  const mapInstanceRef = useRef(null);\n  const geocoderRef = useRef(null);\n  const placesServiceRef = useRef(null);\n  const autocompleteRef = useRef(null);\n  const inputRef = useRef(null);\n  const lastLocationRef = useRef(null);\n\n  // Initialize Google Maps\n  useEffect(() => {\n    loadGoogleMaps(GOOGLE_MAPS_API_KEY)\n      .then((google) => {\n    const mapDiv = document.getElementById('mapdiv');\n    if (!mapDiv) {\n      console.error('Map div not found');\n      return;\n    }\n        const map = new google.maps.Map(mapDiv, {\n          center: DEFAULT_CENTER,\n          zoom: 16,\n          mapTypeControl: false,\n          streetViewControl: false,\n          fullscreenControl: true,\n        });\n        mapInstanceRef.current = map;\n        geocoderRef.current = new google.maps.Geocoder();\n        placesServiceRef.current = new google.maps.places.PlacesService(map);\n\n        // Map click -> reverse geocode + marker + amenities\n        map.addListener('click', (e) => {\n          const latLng = e.latLng;\n          placeMarker(latLng);\n          reverseGeocode(latLng);\n          fetchAmenities(latLng, selectedAmenityTypes);\n        });\n\n        // Autocomplete on input\n        if (inputRef.current) {\n          const autocomplete = new google.maps.places.Autocomplete(inputRef.current, {\n            componentRestrictions: { country: 'sg' },\n            fields: ['geometry', 'formatted_address', 'name'],\n          });\n          autocompleteRef.current = autocomplete;\n          autocomplete.addListener('place_changed', () => {\n            const place = autocomplete.getPlace();\n            if (!place || !place.geometry || !place.geometry.location) return;\n            \n            const latLng = place.geometry.location;\n            map.panTo(latLng);\n            map.setZoom(18);\n            placeMarker(latLng);\n            const address = place.formatted_address || place.name || '';\n            setClickedAddress(address);\n            setSearchAddress(address);\n            setSearchError(''); // Clear any previous errors\n            fetchAmenities(latLng, selectedAmenityTypes);\n          });\n        }\n      })\n      .catch((err) => {\n        console.error('Error loading Google Maps:', err);\n        setSearchError('Map failed to load. Please configure your Google Maps API key in src/config/maps.js or .env');\n      });\n  }, [selectedAmenityTypes]);\n\n  const placeMarker = (latLng) => {\n    const google = window.google;\n    if (!google || !mapInstanceRef.current) return;\n    if (markerRef.current) {\n      markerRef.current.setMap(null);\n      markerRef.current = null;\n    }\n    const marker = new google.maps.Marker({\n      position: latLng,\n      map: mapInstanceRef.current,\n      animation: google.maps.Animation.DROP,\n    });\n    markerRef.current = marker;\n    lastLocationRef.current = latLng;\n  };\n\n  const reverseGeocode = (latLng) => {\n    const geocoder = geocoderRef.current;\n    if (!geocoder) return;\n    geocoder.geocode({ location: latLng }, (results, status) => {\n      if (status === 'OK' && results && results.length) {\n        const result = results[0];\n        const address = result.formatted_address;\n        \n        setClickedAddress(address);\n        setSearchAddress(address);\n        setSearchError(''); // Clear any previous errors\n        if (markerRef.current) {\n          const infowindow = new window.google.maps.InfoWindow({\n            content: `<div style=\\\"font-weight:600\\\">${address}</div>`,\n          });\n          infowindow.open({ anchor: markerRef.current, map: mapInstanceRef.current });\n        }\n        // Now fetch amenities since validation passed\n        fetchAmenities(latLng, selectedAmenityTypes);\n      }\n    });\n  };\n\n  const nearbySearchOnce = (location, type) => {\n    return new Promise((resolve) => {\n      placesServiceRef.current.nearbySearch(\n        { location, radius: SEARCH_RADIUS_METERS, type },\n        (results, status) => {\n          if (status === window.google.maps.places.PlacesServiceStatus.OK && results) {\n            resolve(results.slice(0, 10));\n            } else {\n            resolve([]);\n          }\n        }\n      );\n    });\n  };\n\n  // typesOverride allows using the latest types immediately (avoids stale state)\n  const fetchAmenities = async (latLng, typesOverride) => {\n    const activeTypes = Array.isArray(typesOverride) ? typesOverride : selectedAmenityTypes;\n    try {\n      setIsLoadingAmenities(true);\n      setAmenitiesError('');\n      const promises = activeTypes.map((t) => nearbySearchOnce(latLng, t));\n      const results = await Promise.all(promises);\n      const flat = results.flat();\n      // Deduplicate by place_id\n      const uniqueMap = new Map();\n      for (const r of flat) {\n        if (!uniqueMap.has(r.place_id)) uniqueMap.set(r.place_id, r);\n      }\n      // Enrich with distance and primary type label\n      const google = window.google;\n      const enriched = Array.from(uniqueMap.values()).map((p) => {\n        const distance = google && google.maps.geometry\n          ? google.maps.geometry.spherical.computeDistanceBetween(latLng, p.geometry.location)\n          : null;\n        return {\n          id: p.place_id,\n          name: p.name,\n          vicinity: p.vicinity,\n          rating: p.rating,\n          userRatingsTotal: p.user_ratings_total,\n          types: p.types,\n          location: p.geometry && p.geometry.location,\n          distance,\n        };\n      });\n      // Sort by distance\n      enriched.sort((a, b) => (a.distance || Infinity) - (b.distance || Infinity));\n      setAmenities(enriched);\n    } catch (e) {\n      setAmenitiesError('Failed to load nearby amenities.');\n    } finally {\n      setIsLoadingAmenities(false);\n    }\n  };\n\n  const handleSearchAddress = async () => {\n    setSearchError('');\n    const google = window.google;\n    if (!google || !mapInstanceRef.current) {\n      setSearchError('Map not ready. Please wait a moment and try again.');\n      return;\n    }\n    if (!searchAddress.trim()) return;\n    setIsSearching(true);\n    try {\n      const geocoder = geocoderRef.current || new google.maps.Geocoder();\n      geocoderRef.current = geocoder;\n      geocoder.geocode({ address: `${searchAddress}, Singapore` }, (results, status) => {\n        if (status === 'OK' && results && results.length) {\n          const result = results[0];\n          const latLng = result.geometry.location;\n          \n          mapInstanceRef.current.panTo(latLng);\n          mapInstanceRef.current.setZoom(18);\n          placeMarker(latLng);\n          const address = result.formatted_address;\n          setClickedAddress(address);\n          setSearchAddress(address);\n          fetchAmenities(latLng, selectedAmenityTypes);\n        } else {\n          setSearchError('No results found for this address.');\n        }\n        setIsSearching(false);\n      });\n    } catch (err) {\n      setSearchError('Error searching address.');\n      setIsSearching(false);\n    }\n  };\n\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      handleSearchAddress();\n    }\n  };\n\n  const toggleAmenity = (type) => {\n    setSelectedAmenityTypes((prev) => {\n      const next = prev.includes(type) ? prev.filter((t) => t !== type) : [...prev, type];\n      if (lastLocationRef.current) {\n        // Use the new selection immediately\n        fetchAmenities(lastLocationRef.current, next);\n      }\n      return next;\n    });\n  };\n\n  return (\n    <section className=\"explore\" id=\"intro\">\n      <h2 className=\"section-title\">Explore Automated Valuations</h2>\n      <div className=\"explore-header\">\n        <p className=\"section-subtitle\">Estimate the value of your property now</p>\n      </div>\n      <div className=\"explore-types\">\n        <div className=\"type-pill\">\n          <img src=\"http://localhost:3845/assets/1f2c5cefac5c3b843f4e0ea23b4d6916bfbd2857.svg\" alt=\"Commercial\" />\n          <span>Commercial</span>\n        </div>\n        <div className=\"type-pill\">\n          <img src=\"http://localhost:3845/assets/a6a567e6434a0a9b58b53865a5cf0064ee43d31b.svg\" alt=\"Industrial\" />\n          <span>Industrial</span>\n        </div>\n      </div>\n      <div className=\"explore-grid\">\n        <div className=\"explore-form\">\n          <div className=\"form-row\">\n            <label>Address Search</label>\n            <div className=\"search-container\">\n              <input\n                ref={inputRef}\n                type=\"text\"\n                className=\"search-input\"\n                placeholder=\"Search an address in Singapore (Google Places Autocomplete)\"\n                value={searchAddress}\n                onChange={(e) => {\n                  setSearchAddress(e.target.value);\n                  if (e.target.value === '') {\n                    setSearchError('');\n                    setClickedAddress('');\n                    setAmenities([]);\n                    if (markerRef.current) {\n                      markerRef.current.setMap(null);\n                      markerRef.current = null;\n                    }\n                  }\n                }}\n                onKeyPress={handleKeyPress}\n                disabled={isSearching}\n              />\n              <button \n                className=\"search-btn\" \n                onClick={handleSearchAddress}\n                type=\"button\"\n                disabled={isSearching || !searchAddress.trim()}\n              >\n                {isSearching ? 'Searching...' : 'Search'}\n              </button>\n            </div>\n            {searchError && (\n              <div className=\"search-error\">{searchError}</div>\n            )}\n          </div>\n          {clickedAddress && (\n            <div className=\"form-row\">\n              <label>Selected Location</label>\n              <div className=\"selected-address\">{clickedAddress}</div>\n            </div>\n          )}\n          <div className=\"form-row two-cols\">\n            <div>\n              <label>Property Type</label>\n              <div className=\"input like-input\">Select Property Type</div>\n            </div>\n            <div>\n              <label>Floor Area</label>\n              <div className=\"input like-input\">Enter Floor Area</div>\n            </div>\n          </div>\n          <div className=\"form-row\">\n            <button className=\"btn btn-primary\">Predict Price</button>\n            <div className=\"hint\">Sign in to view full prediction and data insights.</div>\n          </div>\n        </div>\n        <div className=\"explore-image\">\n          <div id=\"mapdiv\" style={{ height: '400px' }}></div>\n          <div className=\"map-instructions\">\n            <p>ðŸ§­ <strong>Nearby Amenities</strong></p>\n            <p>Click the map or use search to pick a location.</p>\n            <p><small>Weâ€™ll list nearby schools, transport, food, healthcare and more.</small></p>\n          </div>\n\n          <div className=\"amenities-panel\">\n            <div className=\"amenities-header\">\n              <h3>Nearby Amenities</h3>\n              <div className=\"amenity-filters\">\n                {AMENITY_OPTIONS.map((opt) => (\n            <button \n                    key={opt.type}\n              type=\"button\" \n                    className={`amenity-chip ${selectedAmenityTypes.includes(opt.type) ? 'active' : ''}`}\n                    onClick={() => toggleAmenity(opt.type)}\n                  >\n                    {opt.label}\n            </button>\n                ))}\n              </div>\n            </div>\n\n            {isLoadingAmenities && (\n              <div className=\"amenities-loading\">Loading amenitiesâ€¦</div>\n            )}\n            {amenitiesError && (\n              <div className=\"amenities-error\">{amenitiesError}</div>\n            )}\n\n            {!isLoadingAmenities && !amenitiesError && amenities.length === 0 && (\n              <div className=\"amenities-empty\">Select a location to load nearby amenities.</div>\n            )}\n\n            {!isLoadingAmenities && amenities.length > 0 && (\n              <ul className=\"amenities-list\">\n                {amenities.map((a) => (\n                  <li className=\"amenity-item\" key={a.id}>\n                    <div className=\"amenity-main\">\n                      <div className=\"amenity-name\">{a.name}</div>\n                      {a.vicinity && <div className=\"amenity-address\">{a.vicinity}</div>}\n                    </div>\n                    <div className=\"amenity-meta\">\n                      {typeof a.rating === 'number' && (\n                        <span className=\"amenity-rating\">â˜… {a.rating.toFixed(1)}</span>\n                      )}\n                      {typeof a.distance === 'number' && (\n                        <span className=\"amenity-distance\">{Math.round(a.distance)} m</span>\n                      )}\n                      <a\n                        className=\"amenity-link\"\n                        href={`https://www.google.com/maps/place/?q=place_id:${a.id}`}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                      >\n                        Open in Maps\n                      </a>\n                    </div>\n                  </li>\n                ))}\n              </ul>\n            )}\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default Explore;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"// Dynamic Image Search Service\n// Fetches real images from multiple sources based on address\n\nclass ImageSearchService {\n  // Search for images using DuckDuckGo (no API key required)\n  static async searchDuckDuckGo(query, count = 1) {\n    try {\n      // DuckDuckGo Instant Answer API\n      const searchUrl = `https://api.duckduckgo.com/?q=${encodeURIComponent(query)}&format=json&no_html=1&skip_disambig=1`;\n      const response = await fetch(searchUrl);\n      const data = await response.json();\n      if (data.Image && data.Image !== '') {\n        return data.Image;\n      }\n      return null;\n    } catch (error) {\n      console.error('DuckDuckGo search error:', error);\n      return null;\n    }\n  }\n\n  // Search for images using Bing Image Search (requires API key)\n  static async searchBing(query, count = 1) {\n    try {\n      const apiKey = process.env.REACT_APP_BING_API_KEY;\n      if (!apiKey) {\n        console.warn('Bing API key not found. Please set REACT_APP_BING_API_KEY in your .env file');\n        return null;\n      }\n      const searchUrl = `https://api.bing.microsoft.com/v7.0/images/search?q=${encodeURIComponent(query)}&count=${count}`;\n      const response = await fetch(searchUrl, {\n        headers: {\n          'Ocp-Apim-Subscription-Key': apiKey\n        }\n      });\n      const data = await response.json();\n      if (data.value && data.value.length > 0) {\n        return data.value[0].contentUrl;\n      }\n      return null;\n    } catch (error) {\n      console.error('Bing search error:', error);\n      return null;\n    }\n  }\n\n  // Search for images using Unsplash API (free tier available)\n  static async searchUnsplash(query, count = 1) {\n    try {\n      const apiKey = process.env.REACT_APP_UNSPLASH_API_KEY;\n      if (!apiKey) {\n        console.warn('Unsplash API key not found. Please set REACT_APP_UNSPLASH_API_KEY in your .env file');\n        return null;\n      }\n      const searchUrl = `https://api.unsplash.com/search/photos?query=${encodeURIComponent(query)}&per_page=${count}`;\n      const response = await fetch(searchUrl, {\n        headers: {\n          'Authorization': `Client-ID ${apiKey}`\n        }\n      });\n      const data = await response.json();\n      if (data.results && data.results.length > 0) {\n        return data.results[0].urls.regular;\n      }\n      return null;\n    } catch (error) {\n      console.error('Unsplash search error:', error);\n      return null;\n    }\n  }\n\n  // Search for images using Pexels API (free tier available)\n  static async searchPexels(query, count = 1) {\n    try {\n      const apiKey = process.env.REACT_APP_PEXELS_API_KEY;\n      if (!apiKey) {\n        console.warn('Pexels API key not found. Please set REACT_APP_PEXELS_API_KEY in your .env file');\n        return null;\n      }\n      const searchUrl = `https://api.pexels.com/v1/search?query=${encodeURIComponent(query)}&per_page=${count}`;\n      const response = await fetch(searchUrl, {\n        headers: {\n          'Authorization': apiKey\n        }\n      });\n      const data = await response.json();\n      if (data.photos && data.photos.length > 0) {\n        return data.photos[0].src.medium;\n      }\n      return null;\n    } catch (error) {\n      console.error('Pexels search error:', error);\n      return null;\n    }\n  }\n\n  // Get the best available image from multiple sources\n  static async getBestImage(query, size = '400x250') {\n    try {\n      // Try multiple sources in order of preference\n      let imageUrl = null;\n\n      // 1. Try DuckDuckGo first (no API key required)\n      imageUrl = await this.searchDuckDuckGo(query);\n      if (imageUrl) {\n        console.log('Found image from DuckDuckGo:', imageUrl);\n        return imageUrl;\n      }\n\n      // 2. Try Unsplash (free tier, good quality)\n      imageUrl = await this.searchUnsplash(query);\n      if (imageUrl) {\n        console.log('Found image from Unsplash:', imageUrl);\n        return imageUrl;\n      }\n\n      // 3. Try Pexels (free tier, good quality)\n      imageUrl = await this.searchPexels(query);\n      if (imageUrl) {\n        console.log('Found image from Pexels:', imageUrl);\n        return imageUrl;\n      }\n\n      // 4. Try Bing (requires API key, but comprehensive)\n      imageUrl = await this.searchBing(query);\n      if (imageUrl) {\n        console.log('Found image from Bing:', imageUrl);\n        return imageUrl;\n      }\n      console.log('No images found from any source for query:', query);\n      return null;\n    } catch (error) {\n      console.error('Error getting best image:', error);\n      return null;\n    }\n  }\n\n  // Get property-specific image based on address and property type\n  static async getPropertyImage(address, propertyType = '') {\n    try {\n      // Create search queries with different strategies\n      const queries = [`${propertyType} ${address}`,\n      // Property type + address\n      `${address} building`,\n      // Address + building\n      `${address} property`,\n      // Address + property\n      `${propertyType} Singapore`,\n      // Property type + location\n      address // Just the address\n      ];\n\n      // Try each query until we find an image\n      for (const query of queries) {\n        const imageUrl = await this.getBestImage(query);\n        if (imageUrl) {\n          return imageUrl;\n        }\n      }\n      return null;\n    } catch (error) {\n      console.error('Error getting property image:', error);\n      return null;\n    }\n  }\n\n  // Get comparison image for two addresses\n  static async getComparisonImage(address1, address2) {\n    try {\n      // Try to get image for the first address\n      const image1 = await this.getPropertyImage(address1);\n      if (image1) {\n        return image1;\n      }\n\n      // Fallback to second address\n      const image2 = await this.getPropertyImage(address2);\n      if (image2) {\n        return image2;\n      }\n\n      // Final fallback to generic property image\n      return await this.getBestImage('Singapore industrial property building');\n    } catch (error) {\n      console.error('Error getting comparison image:', error);\n      return null;\n    }\n  }\n}\nexport default ImageSearchService;","map":{"version":3,"names":["ImageSearchService","searchDuckDuckGo","query","count","searchUrl","encodeURIComponent","response","fetch","data","json","Image","error","console","searchBing","apiKey","process","env","REACT_APP_BING_API_KEY","warn","headers","value","length","contentUrl","searchUnsplash","REACT_APP_UNSPLASH_API_KEY","results","urls","regular","searchPexels","REACT_APP_PEXELS_API_KEY","photos","src","medium","getBestImage","size","imageUrl","log","getPropertyImage","address","propertyType","queries","getComparisonImage","address1","address2","image1","image2"],"sources":["C:/Users/mandy/Downloads/fyp-app/fyp-app/frontend/src/services/imageSearch.js"],"sourcesContent":["// Dynamic Image Search Service\r\n// Fetches real images from multiple sources based on address\r\n\r\nclass ImageSearchService {\r\n  // Search for images using DuckDuckGo (no API key required)\r\n  static async searchDuckDuckGo(query, count = 1) {\r\n    try {\r\n      // DuckDuckGo Instant Answer API\r\n      const searchUrl = `https://api.duckduckgo.com/?q=${encodeURIComponent(query)}&format=json&no_html=1&skip_disambig=1`;\r\n      \r\n      const response = await fetch(searchUrl);\r\n      const data = await response.json();\r\n      \r\n      if (data.Image && data.Image !== '') {\r\n        return data.Image;\r\n      }\r\n      \r\n      return null;\r\n    } catch (error) {\r\n      console.error('DuckDuckGo search error:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // Search for images using Bing Image Search (requires API key)\r\n  static async searchBing(query, count = 1) {\r\n    try {\r\n      const apiKey = process.env.REACT_APP_BING_API_KEY;\r\n      if (!apiKey) {\r\n        console.warn('Bing API key not found. Please set REACT_APP_BING_API_KEY in your .env file');\r\n        return null;\r\n      }\r\n\r\n      const searchUrl = `https://api.bing.microsoft.com/v7.0/images/search?q=${encodeURIComponent(query)}&count=${count}`;\r\n      \r\n      const response = await fetch(searchUrl, {\r\n        headers: {\r\n          'Ocp-Apim-Subscription-Key': apiKey\r\n        }\r\n      });\r\n      \r\n      const data = await response.json();\r\n      \r\n      if (data.value && data.value.length > 0) {\r\n        return data.value[0].contentUrl;\r\n      }\r\n      \r\n      return null;\r\n    } catch (error) {\r\n      console.error('Bing search error:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // Search for images using Unsplash API (free tier available)\r\n  static async searchUnsplash(query, count = 1) {\r\n    try {\r\n      const apiKey = process.env.REACT_APP_UNSPLASH_API_KEY;\r\n      if (!apiKey) {\r\n        console.warn('Unsplash API key not found. Please set REACT_APP_UNSPLASH_API_KEY in your .env file');\r\n        return null;\r\n      }\r\n\r\n      const searchUrl = `https://api.unsplash.com/search/photos?query=${encodeURIComponent(query)}&per_page=${count}`;\r\n      \r\n      const response = await fetch(searchUrl, {\r\n        headers: {\r\n          'Authorization': `Client-ID ${apiKey}`\r\n        }\r\n      });\r\n      \r\n      const data = await response.json();\r\n      \r\n      if (data.results && data.results.length > 0) {\r\n        return data.results[0].urls.regular;\r\n      }\r\n      \r\n      return null;\r\n    } catch (error) {\r\n      console.error('Unsplash search error:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // Search for images using Pexels API (free tier available)\r\n  static async searchPexels(query, count = 1) {\r\n    try {\r\n      const apiKey = process.env.REACT_APP_PEXELS_API_KEY;\r\n      if (!apiKey) {\r\n        console.warn('Pexels API key not found. Please set REACT_APP_PEXELS_API_KEY in your .env file');\r\n        return null;\r\n      }\r\n\r\n      const searchUrl = `https://api.pexels.com/v1/search?query=${encodeURIComponent(query)}&per_page=${count}`;\r\n      \r\n      const response = await fetch(searchUrl, {\r\n        headers: {\r\n          'Authorization': apiKey\r\n        }\r\n      });\r\n      \r\n      const data = await response.json();\r\n      \r\n      if (data.photos && data.photos.length > 0) {\r\n        return data.photos[0].src.medium;\r\n      }\r\n      \r\n      return null;\r\n    } catch (error) {\r\n      console.error('Pexels search error:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // Get the best available image from multiple sources\r\n  static async getBestImage(query, size = '400x250') {\r\n    try {\r\n      // Try multiple sources in order of preference\r\n      let imageUrl = null;\r\n      \r\n      // 1. Try DuckDuckGo first (no API key required)\r\n      imageUrl = await this.searchDuckDuckGo(query);\r\n      if (imageUrl) {\r\n        console.log('Found image from DuckDuckGo:', imageUrl);\r\n        return imageUrl;\r\n      }\r\n      \r\n      // 2. Try Unsplash (free tier, good quality)\r\n      imageUrl = await this.searchUnsplash(query);\r\n      if (imageUrl) {\r\n        console.log('Found image from Unsplash:', imageUrl);\r\n        return imageUrl;\r\n      }\r\n      \r\n      // 3. Try Pexels (free tier, good quality)\r\n      imageUrl = await this.searchPexels(query);\r\n      if (imageUrl) {\r\n        console.log('Found image from Pexels:', imageUrl);\r\n        return imageUrl;\r\n      }\r\n      \r\n      // 4. Try Bing (requires API key, but comprehensive)\r\n      imageUrl = await this.searchBing(query);\r\n      if (imageUrl) {\r\n        console.log('Found image from Bing:', imageUrl);\r\n        return imageUrl;\r\n      }\r\n      \r\n      console.log('No images found from any source for query:', query);\r\n      return null;\r\n      \r\n    } catch (error) {\r\n      console.error('Error getting best image:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // Get property-specific image based on address and property type\r\n  static async getPropertyImage(address, propertyType = '') {\r\n    try {\r\n      // Create search queries with different strategies\r\n      const queries = [\r\n        `${propertyType} ${address}`,  // Property type + address\r\n        `${address} building`,         // Address + building\r\n        `${address} property`,         // Address + property\r\n        `${propertyType} Singapore`,   // Property type + location\r\n        address                        // Just the address\r\n      ];\r\n      \r\n      // Try each query until we find an image\r\n      for (const query of queries) {\r\n        const imageUrl = await this.getBestImage(query);\r\n        if (imageUrl) {\r\n          return imageUrl;\r\n        }\r\n      }\r\n      \r\n      return null;\r\n      \r\n    } catch (error) {\r\n      console.error('Error getting property image:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // Get comparison image for two addresses\r\n  static async getComparisonImage(address1, address2) {\r\n    try {\r\n      // Try to get image for the first address\r\n      const image1 = await this.getPropertyImage(address1);\r\n      if (image1) {\r\n        return image1;\r\n      }\r\n      \r\n      // Fallback to second address\r\n      const image2 = await this.getPropertyImage(address2);\r\n      if (image2) {\r\n        return image2;\r\n      }\r\n      \r\n      // Final fallback to generic property image\r\n      return await this.getBestImage('Singapore industrial property building');\r\n      \r\n    } catch (error) {\r\n      console.error('Error getting comparison image:', error);\r\n      return null;\r\n    }\r\n  }\r\n}\r\n\r\nexport default ImageSearchService;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
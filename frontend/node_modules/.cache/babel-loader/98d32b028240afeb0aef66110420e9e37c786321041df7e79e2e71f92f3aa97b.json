{"ast":null,"code":"var _jsxFileName = \"/Users/mandyng/fyp-app/src/components/landing-page/Explore.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from 'react';\nimport './Explore.css';\n\n// Check if Leaflet is available\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet L;\ntry {\n  L = require('leaflet');\n  require('leaflet/dist/leaflet.css');\n} catch (error) {\n  console.error('Error loading Leaflet:', error);\n}\nconst Explore = () => {\n  _s();\n  const [searchAddress, setSearchAddress] = useState('');\n  const [currentMarker, setCurrentMarker] = useState(null);\n  const [clickedAddress, setClickedAddress] = useState('');\n  const [isSearching, setIsSearching] = useState(false);\n  const [searchError, setSearchError] = useState('');\n  const mapRef = useRef(null);\n  const markerRef = useRef(null);\n  useEffect(() => {\n    // Leaflet map setup (runs once after component mounts)\n    if (!L) {\n      console.error('Leaflet not available');\n      return;\n    }\n\n    // Check if map div exists\n    const mapDiv = document.getElementById('mapdiv');\n    if (!mapDiv) {\n      console.error('Map div not found');\n      return;\n    }\n    console.log('Initializing map...');\n\n    // Small delay to ensure DOM is ready\n    setTimeout(() => {\n      try {\n        const southWest = L.latLng(1.144, 103.535);\n        const northEast = L.latLng(1.494, 104.502);\n        const maxBounds = L.latLngBounds(southWest, northEast);\n        const map = L.map('mapdiv', {\n          center: L.latLng(1.2868108, 103.8545349),\n          zoom: 16\n        });\n        console.log('Map initialized successfully:', map);\n        console.log('Map center:', map.getCenter());\n        console.log('Map zoom:', map.getZoom());\n        console.log('Map has click method:', typeof map.on === 'function');\n        console.log('Map is clickable:', map.hasEventListeners ? 'Yes' : 'Unknown');\n        mapRef.current = map;\n        map.setMaxBounds(maxBounds);\n        const basemap = L.tileLayer('https://www.onemap.gov.sg/maps/tiles/Default/{z}/{x}/{y}.png', {\n          detectRetina: true,\n          maxZoom: 19,\n          minZoom: 11,\n          attribution: '<img src=\"https://www.onemap.gov.sg/web-assets/images/logo/om_logo.png\" style=\"height:20px;width:20px;\"/>&nbsp;<a href=\"https://www.onemap.gov.sg/\" target=\"_blank\" rel=\"noopener noreferrer\">OneMap</a>&nbsp;&copy;&nbsp;contributors&nbsp;&#124;&nbsp;<a href=\"https://www.sla.gov.sg/\" target=\"_blank\" rel=\"noopener noreferrer\">Singapore Land Authority</a>'\n        });\n        basemap.addTo(map);\n\n        // Add click event to map\n        console.log('Adding click event to map...');\n\n        // First add a simple click handler to test basic functionality\n        map.on('click', e => {\n          console.log('=== BASIC MAP CLICK EVENT TRIGGERED ===');\n          const {\n            lat,\n            lng\n          } = e.latlng;\n          console.log('Basic click at:', lat, lng);\n\n          // Add a simple marker immediately\n          const simpleMarker = L.marker([lat, lng]).addTo(map);\n          simpleMarker.bindPopup(`<b>Click Test:</b><br>Lat: ${lat.toFixed(6)}<br>Lng: ${lng.toFixed(6)}`).openPopup();\n\n          // Remove this test marker after 3 seconds\n          setTimeout(() => {\n            map.removeLayer(simpleMarker);\n          }, 3000);\n        });\n\n        // Now add the full click handler with address lookup\n        map.on('click', async e => {\n          console.log('=== FULL MAP CLICK EVENT TRIGGERED ===');\n          const {\n            lat,\n            lng\n          } = e.latlng;\n          console.log('Full click at:', lat, lng);\n\n          // Remove previous marker if exists\n          if (markerRef.current) {\n            map.removeLayer(markerRef.current);\n          }\n\n          // Add new marker\n          const marker = L.marker([lat, lng]).addTo(map);\n          markerRef.current = marker;\n\n          // Get address from coordinates using reverse geocoding\n          try {\n            console.log('Clicking map at:', lat, lng);\n            let address;\n\n            // Try OneMap first with commercial/industrial focus\n            try {\n              const response = await fetch(`https://developers.onemap.sg/commonapi/revgeocode?location=${lat},${lng}&buffer=200&addressType=S&otherFeatures=true`);\n              if (response.ok) {\n                const data = await response.json();\n                console.log('OneMap reverse geocoding response:', data);\n                if (data.results && data.results.length > 0) {\n                  // Filter for commercial/industrial properties\n                  const commercialResults = data.results.filter(result => {\n                    const address = result.ADDRESS || '';\n                    const type = result.TYPE || '';\n                    return address.toLowerCase().includes('office') || address.toLowerCase().includes('commercial') || address.toLowerCase().includes('industrial') || address.toLowerCase().includes('warehouse') || address.toLowerCase().includes('factory') || address.toLowerCase().includes('shop') || address.toLowerCase().includes('mall') || address.toLowerCase().includes('building') || type.toLowerCase().includes('commercial') || type.toLowerCase().includes('industrial');\n                  });\n                  if (commercialResults.length > 0) {\n                    address = commercialResults[0].ADDRESS;\n                    console.log('Found commercial/industrial area:', address);\n                  } else {\n                    address = data.results[0].ADDRESS;\n                    console.log('Using general area (may not be commercial):', address);\n                  }\n                }\n              }\n            } catch (error) {\n              console.log('OneMap reverse geocoding failed, trying OpenStreetMap...');\n            }\n\n            // Fallback to OpenStreetMap if OneMap fails\n            if (!address) {\n              try {\n                const response = await fetch(`https://nominatim.openstreetmap.org/reverse?lat=${lat}&lon=${lng}&format=json&addressdetails=1`);\n                const data = await response.json();\n                console.log('OpenStreetMap reverse geocoding response:', data);\n\n                // Check if this area has commercial characteristics\n                const addressParts = data.display_name.toLowerCase();\n                const isCommercialArea = addressParts.includes('commercial') || addressParts.includes('industrial') || addressParts.includes('business') || addressParts.includes('office') || addressParts.includes('shop') || addressParts.includes('mall');\n                address = data.display_name;\n                if (isCommercialArea) {\n                  console.log('Found commercial/industrial area via OpenStreetMap:', address);\n                } else {\n                  console.log('Using general area (may not be commercial):', address);\n                }\n              } catch (error) {\n                console.log('OpenStreetMap reverse geocoding also failed');\n              }\n            }\n            if (address) {\n              setClickedAddress(address);\n              setSearchAddress(address); // Update search input with clicked address\n\n              // Show popup with address\n              marker.bindPopup(`<b>Address:</b><br>${address}`).openPopup();\n            } else {\n              const fallbackAddress = `Lat: ${lat.toFixed(6)}, Lng: ${lng.toFixed(6)}`;\n              setClickedAddress(fallbackAddress);\n              setSearchAddress(fallbackAddress);\n              marker.bindPopup(`<b>Coordinates:</b><br>${fallbackAddress}`).openPopup();\n            }\n          } catch (error) {\n            console.error('Error getting address:', error);\n            const fallbackAddress = `Lat: ${lat.toFixed(6)}, Lng: ${lng.toFixed(6)}`;\n            setClickedAddress(fallbackAddress);\n            setSearchAddress(fallbackAddress);\n            marker.bindPopup(`<b>Coordinates:</b><br>${fallbackAddress}`).openPopup();\n          }\n        });\n\n        // Cleanup map on unmount\n        return () => {\n          map.remove();\n        };\n      } catch (error) {\n        console.error('Error initializing map:', error);\n      }\n    }, 100); // 100ms delay\n  }, []);\n\n  // Function to search address and show on map\n  const handleSearchAddress = async () => {\n    console.log('Search function called with:', searchAddress);\n    console.log('Map ref available:', !!mapRef.current);\n    if (!searchAddress.trim()) {\n      console.log('Search address is empty');\n      return;\n    }\n    if (!mapRef.current) {\n      console.error('Map not initialized yet');\n      setSearchError('Map not ready. Please wait a moment and try again.');\n      return;\n    }\n    setIsSearching(true);\n    setSearchError('');\n    setClickedAddress(''); // Clear any previously clicked address\n\n    // Remove any existing marker when starting a new search\n    if (markerRef.current && mapRef.current) {\n      mapRef.current.removeLayer(markerRef.current);\n      markerRef.current = null;\n    }\n    try {\n      console.log('Searching for address:', searchAddress);\n\n      // Try multiple geocoding services as fallback\n      let response, data;\n\n      // First try OneMap Singapore with broader search\n      try {\n        response = await fetch(`https://developers.onemap.sg/commonapi/search?searchVal=${encodeURIComponent(searchAddress)}&returnGeom=Y&getAddrDetails=Y&pageNum=1`);\n        data = await response.json();\n      } catch (error) {\n        console.log('OneMap failed, trying OpenStreetMap...');\n        // Fallback to OpenStreetMap Nominatim\n        response = await fetch(`https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(searchAddress + ', Singapore')}&format=json&limit=10`);\n        data = await response.json();\n      }\n      console.log('Search response:', data);\n      console.log('Number of results:', data.results ? data.results.length : data.length);\n\n      // Handle both OneMap and OpenStreetMap response formats\n      let lat, lng, address;\n      let isCommercial = false;\n      if (data.results && data.results.length > 0) {\n        // OneMap format - prioritize commercial/industrial properties but accept all results\n        const commercialResults = data.results.filter(result => {\n          const address = result.ADDRESS || '';\n          const type = result.TYPE || '';\n          return address.toLowerCase().includes('office') || address.toLowerCase().includes('commercial') || address.toLowerCase().includes('industrial') || address.toLowerCase().includes('warehouse') || address.toLowerCase().includes('factory') || address.toLowerCase().includes('shop') || address.toLowerCase().includes('mall') || address.toLowerCase().includes('building') || address.toLowerCase().includes('place') || address.toLowerCase().includes('tower') || address.toLowerCase().includes('centre') || address.toLowerCase().includes('center') || type.toLowerCase().includes('commercial') || type.toLowerCase().includes('industrial');\n        });\n        if (commercialResults.length > 0) {\n          const result = commercialResults[0];\n          lat = parseFloat(result.LATITUDE);\n          lng = parseFloat(result.LONGITUDE);\n          address = result.ADDRESS;\n          isCommercial = true;\n          console.log('Found commercial/industrial property:', address);\n        } else {\n          // Use first result if no commercial properties found\n          const result = data.results[0];\n          lat = parseFloat(result.LATITUDE);\n          lng = parseFloat(result.LONGITUDE);\n          address = result.ADDRESS;\n          console.log('Using first available result:', address);\n        }\n      } else if (data.length > 0) {\n        // OpenStreetMap format - prioritize commercial/industrial properties but accept all results\n        const commercialResults = data.filter(result => {\n          const displayName = result.display_name || '';\n          const type = result.type || '';\n          return displayName.toLowerCase().includes('office') || displayName.toLowerCase().includes('commercial') || displayName.toLowerCase().includes('industrial') || displayName.toLowerCase().includes('warehouse') || displayName.toLowerCase().includes('factory') || displayName.toLowerCase().includes('shop') || displayName.toLowerCase().includes('mall') || displayName.toLowerCase().includes('building') || displayName.toLowerCase().includes('place') || displayName.toLowerCase().includes('tower') || displayName.toLowerCase().includes('centre') || displayName.toLowerCase().includes('center') || type.toLowerCase().includes('commercial') || type.toLowerCase().includes('industrial');\n        });\n        if (commercialResults.length > 0) {\n          const result = commercialResults[0];\n          lat = parseFloat(result.lat);\n          lng = parseFloat(result.lon);\n          address = result.display_name;\n          isCommercial = true;\n          console.log('Found commercial/industrial property:', address);\n        } else {\n          // Use first result if no commercial properties found\n          const result = data[0];\n          lat = parseFloat(result.lat);\n          lng = parseFloat(result.lon);\n          address = result.display_name;\n          console.log('Using first available result:', address);\n        }\n      }\n      if (!lat || !lng || !address) {\n        console.error('No valid coordinates found for search:', searchAddress);\n        setSearchError('No results found for this address. Please try a different search term.');\n        setIsSearching(false);\n        return;\n      }\n      console.log('Found coordinates:', lat, lng, 'for address:', address);\n      console.log('Is commercial/industrial:', isCommercial);\n\n      // Remove previous marker if exists\n      if (markerRef.current) {\n        mapRef.current.removeLayer(markerRef.current);\n      }\n\n      // Add new marker\n      const marker = L.marker([lat, lng]).addTo(mapRef.current);\n      markerRef.current = marker;\n\n      // Center map on the found location\n      mapRef.current.setView([lat, lng], 18);\n\n      // Show popup with address and property type\n      const popupContent = isCommercial ? `<b>üè¢ Commercial/Industrial Property</b><br>${address}` : `<b>üìç Property Found</b><br>${address}<br><small>(May not be commercial/industrial)</small>`;\n      marker.bindPopup(popupContent).openPopup();\n      setClickedAddress(address);\n      // Don't clear search input - keep it for reference\n    } catch (error) {\n      console.error('Error searching address:', error);\n      setSearchError(`Error searching address: ${error.message}`);\n    } finally {\n      setIsSearching(false);\n    }\n  };\n\n  // Function to handle Enter key press\n  const handleKeyPress = e => {\n    if (e.key === 'Enter') {\n      handleSearchAddress();\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: \"explore\",\n    id: \"intro\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"section-title\",\n      children: \"Explore Automated Valuations\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"section-subtitle\",\n      children: \"Estimate the value of your property now\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"explore-types\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"type-pill\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"http://localhost:3845/assets/1f2c5cefac5c3b843f4e0ea23b4d6916bfbd2857.svg\",\n          alt: \"Commercial\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 387,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Commercial\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 386,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"type-pill\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"http://localhost:3845/assets/a6a567e6434a0a9b58b53865a5cf0064ee43d31b.svg\",\n          alt: \"Industrial\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Industrial\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"explore-grid\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"explore-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Address Search\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"search-container\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              className: \"search-input\",\n              placeholder: \"Enter Commercial/Industrial Property Address (e.g., Office, Warehouse, Factory)\",\n              value: searchAddress,\n              onChange: e => {\n                setSearchAddress(e.target.value);\n                if (e.target.value === '') {\n                  setSearchError('');\n                  setClickedAddress(''); // Clear selected location when search is cleared\n                  // Remove marker from map when search is cleared\n                  if (markerRef.current && mapRef.current) {\n                    mapRef.current.removeLayer(markerRef.current);\n                    markerRef.current = null;\n                  }\n                }\n              },\n              onKeyPress: handleKeyPress,\n              disabled: isSearching\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 400,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"search-btn\",\n              onClick: handleSearchAddress,\n              type: \"button\",\n              disabled: isSearching || !searchAddress.trim(),\n              children: isSearching ? 'Searching...' : 'Search'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 420,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 399,\n            columnNumber: 13\n          }, this), searchError && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"search-error\",\n            children: searchError\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 11\n        }, this), clickedAddress && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Selected Location\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 437,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"selected-address\",\n            children: clickedAddress\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-row two-cols\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Property Type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 445,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input like-input\",\n              children: \"Select Property Type\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 444,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Floor Area\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 449,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input like-input\",\n              children: \"Enter Floor Area\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 448,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 443,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-row\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary\",\n            children: \"Predict Price\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 454,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"hint\",\n            children: \"Sign in to view full prediction and data insights.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 455,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 453,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"explore-image\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"mapdiv\",\n          style: {\n            height: '400px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 459,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"map-instructions\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"\\uD83C\\uDFE2 \", /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Commercial & Industrial Properties Only\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 461,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 461,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"\\uD83D\\uDCA1 Click on the map to find commercial areas, or search for specific addresses above\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 462,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: /*#__PURE__*/_jsxDEV(\"small\", {\n              children: \"Focuses on offices, warehouses, factories, shops, malls, and commercial buildings\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 463,\n              columnNumber: 16\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 463,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"map-debug\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"debug-btn\",\n            onClick: () => {\n              console.log('Map ref:', mapRef.current);\n              console.log('Marker ref:', markerRef.current);\n              console.log('Current search address:', searchAddress);\n              console.log('Current clicked address:', clickedAddress);\n            },\n            children: \"Debug Map State\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 466,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"debug-btn\",\n            style: {\n              marginLeft: '0.5rem'\n            },\n            onClick: () => {\n              if (mapRef.current) {\n                // Test map functionality without API calls\n                const testLat = 1.2868108;\n                const testLng = 103.8545349;\n                const testAddress = 'Test Location (Orchard Road area)';\n\n                // Remove previous marker if exists\n                if (markerRef.current) {\n                  mapRef.current.removeLayer(markerRef.current);\n                }\n\n                // Add test marker\n                const marker = L.marker([testLat, testLng]).addTo(mapRef.current);\n                markerRef.current = marker;\n\n                // Center map on test location\n                mapRef.current.setView([testLat, testLng], 18);\n\n                // Show popup\n                marker.bindPopup(`<b>Test Address:</b><br>${testAddress}`).openPopup();\n                setClickedAddress(testAddress);\n                setSearchAddress(testAddress);\n                console.log('Test marker added successfully');\n              }\n            },\n            children: \"Test Map (No API)\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 458,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 382,\n    columnNumber: 5\n  }, this);\n};\n_s(Explore, \"f/msnI3BtQrmIsjoWh1Jl+L+XGM=\");\n_c = Explore;\nexport default Explore;\nvar _c;\n$RefreshReg$(_c, \"Explore\");","map":{"version":3,"names":["React","useEffect","useState","useRef","jsxDEV","_jsxDEV","L","require","error","console","Explore","_s","searchAddress","setSearchAddress","currentMarker","setCurrentMarker","clickedAddress","setClickedAddress","isSearching","setIsSearching","searchError","setSearchError","mapRef","markerRef","mapDiv","document","getElementById","log","setTimeout","southWest","latLng","northEast","maxBounds","latLngBounds","map","center","zoom","getCenter","getZoom","on","hasEventListeners","current","setMaxBounds","basemap","tileLayer","detectRetina","maxZoom","minZoom","attribution","addTo","e","lat","lng","latlng","simpleMarker","marker","bindPopup","toFixed","openPopup","removeLayer","address","response","fetch","ok","data","json","results","length","commercialResults","filter","result","ADDRESS","type","TYPE","toLowerCase","includes","addressParts","display_name","isCommercialArea","fallbackAddress","remove","handleSearchAddress","trim","encodeURIComponent","isCommercial","parseFloat","LATITUDE","LONGITUDE","displayName","lon","setView","popupContent","message","handleKeyPress","key","className","id","children","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","placeholder","value","onChange","target","onKeyPress","disabled","onClick","style","height","marginLeft","testLat","testLng","testAddress","_c","$RefreshReg$"],"sources":["/Users/mandyng/fyp-app/src/components/landing-page/Explore.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from 'react';\nimport './Explore.css';\n\n// Check if Leaflet is available\nlet L;\ntry {\n  L = require('leaflet');\n  require('leaflet/dist/leaflet.css');\n} catch (error) {\n  console.error('Error loading Leaflet:', error);\n}\n\nconst Explore = () => {\n  const [searchAddress, setSearchAddress] = useState('');\n  const [currentMarker, setCurrentMarker] = useState(null);\n  const [clickedAddress, setClickedAddress] = useState('');\n  const [isSearching, setIsSearching] = useState(false);\n  const [searchError, setSearchError] = useState('');\n  const mapRef = useRef(null);\n  const markerRef = useRef(null);\n\n  useEffect(() => {\n    // Leaflet map setup (runs once after component mounts)\n    if (!L) {\n      console.error('Leaflet not available');\n      return;\n    }\n\n    // Check if map div exists\n    const mapDiv = document.getElementById('mapdiv');\n    if (!mapDiv) {\n      console.error('Map div not found');\n      return;\n    }\n\n    console.log('Initializing map...');\n    \n    // Small delay to ensure DOM is ready\n    setTimeout(() => {\n      try {\n        const southWest = L.latLng(1.144, 103.535);\n        const northEast = L.latLng(1.494, 104.502);\n        const maxBounds = L.latLngBounds(southWest, northEast);\n\n        const map = L.map('mapdiv', {\n          center: L.latLng(1.2868108, 103.8545349),\n          zoom: 16,\n        });\n\n        console.log('Map initialized successfully:', map);\n        console.log('Map center:', map.getCenter());\n        console.log('Map zoom:', map.getZoom());\n        console.log('Map has click method:', typeof map.on === 'function');\n        console.log('Map is clickable:', map.hasEventListeners ? 'Yes' : 'Unknown');\n        mapRef.current = map;\n        map.setMaxBounds(maxBounds);\n\n        const basemap = L.tileLayer('https://www.onemap.gov.sg/maps/tiles/Default/{z}/{x}/{y}.png', {\n          detectRetina: true,\n          maxZoom: 19,\n          minZoom: 11,\n          attribution:\n            '<img src=\"https://www.onemap.gov.sg/web-assets/images/logo/om_logo.png\" style=\"height:20px;width:20px;\"/>&nbsp;<a href=\"https://www.onemap.gov.sg/\" target=\"_blank\" rel=\"noopener noreferrer\">OneMap</a>&nbsp;&copy;&nbsp;contributors&nbsp;&#124;&nbsp;<a href=\"https://www.sla.gov.sg/\" target=\"_blank\" rel=\"noopener noreferrer\">Singapore Land Authority</a>',\n        });\n\n        basemap.addTo(map);\n\n        // Add click event to map\n        console.log('Adding click event to map...');\n        \n        // First add a simple click handler to test basic functionality\n        map.on('click', (e) => {\n          console.log('=== BASIC MAP CLICK EVENT TRIGGERED ===');\n          const { lat, lng } = e.latlng;\n          console.log('Basic click at:', lat, lng);\n          \n          // Add a simple marker immediately\n          const simpleMarker = L.marker([lat, lng]).addTo(map);\n          simpleMarker.bindPopup(`<b>Click Test:</b><br>Lat: ${lat.toFixed(6)}<br>Lng: ${lng.toFixed(6)}`).openPopup();\n          \n          // Remove this test marker after 3 seconds\n          setTimeout(() => {\n            map.removeLayer(simpleMarker);\n          }, 3000);\n        });\n        \n        // Now add the full click handler with address lookup\n        map.on('click', async (e) => {\n          console.log('=== FULL MAP CLICK EVENT TRIGGERED ===');\n          const { lat, lng } = e.latlng;\n          console.log('Full click at:', lat, lng);\n          \n          // Remove previous marker if exists\n          if (markerRef.current) {\n            map.removeLayer(markerRef.current);\n          }\n\n          // Add new marker\n          const marker = L.marker([lat, lng]).addTo(map);\n          markerRef.current = marker;\n\n          // Get address from coordinates using reverse geocoding\n          try {\n            console.log('Clicking map at:', lat, lng);\n            \n            let address;\n            \n            // Try OneMap first with commercial/industrial focus\n            try {\n              const response = await fetch(\n                `https://developers.onemap.sg/commonapi/revgeocode?location=${lat},${lng}&buffer=200&addressType=S&otherFeatures=true`\n              );\n              \n              if (response.ok) {\n                const data = await response.json();\n                console.log('OneMap reverse geocoding response:', data);\n                \n                if (data.results && data.results.length > 0) {\n                  // Filter for commercial/industrial properties\n                  const commercialResults = data.results.filter(result => {\n                    const address = result.ADDRESS || '';\n                    const type = result.TYPE || '';\n                    return address.toLowerCase().includes('office') || \n                           address.toLowerCase().includes('commercial') ||\n                           address.toLowerCase().includes('industrial') ||\n                           address.toLowerCase().includes('warehouse') ||\n                           address.toLowerCase().includes('factory') ||\n                           address.toLowerCase().includes('shop') ||\n                           address.toLowerCase().includes('mall') ||\n                           address.toLowerCase().includes('building') ||\n                           type.toLowerCase().includes('commercial') ||\n                           type.toLowerCase().includes('industrial');\n                  });\n                  \n                  if (commercialResults.length > 0) {\n                    address = commercialResults[0].ADDRESS;\n                    console.log('Found commercial/industrial area:', address);\n                  } else {\n                    address = data.results[0].ADDRESS;\n                    console.log('Using general area (may not be commercial):', address);\n                  }\n                }\n              }\n            } catch (error) {\n              console.log('OneMap reverse geocoding failed, trying OpenStreetMap...');\n            }\n            \n            // Fallback to OpenStreetMap if OneMap fails\n            if (!address) {\n              try {\n                const response = await fetch(\n                  `https://nominatim.openstreetmap.org/reverse?lat=${lat}&lon=${lng}&format=json&addressdetails=1`\n                );\n                const data = await response.json();\n                console.log('OpenStreetMap reverse geocoding response:', data);\n                \n                // Check if this area has commercial characteristics\n                const addressParts = data.display_name.toLowerCase();\n                const isCommercialArea = addressParts.includes('commercial') || \n                                       addressParts.includes('industrial') ||\n                                       addressParts.includes('business') ||\n                                       addressParts.includes('office') ||\n                                       addressParts.includes('shop') ||\n                                       addressParts.includes('mall');\n                \n                address = data.display_name;\n                if (isCommercialArea) {\n                  console.log('Found commercial/industrial area via OpenStreetMap:', address);\n                } else {\n                  console.log('Using general area (may not be commercial):', address);\n                }\n              } catch (error) {\n                console.log('OpenStreetMap reverse geocoding also failed');\n              }\n            }\n            \n            if (address) {\n              setClickedAddress(address);\n              setSearchAddress(address); // Update search input with clicked address\n              \n              // Show popup with address\n              marker.bindPopup(`<b>Address:</b><br>${address}`).openPopup();\n            } else {\n              const fallbackAddress = `Lat: ${lat.toFixed(6)}, Lng: ${lng.toFixed(6)}`;\n              setClickedAddress(fallbackAddress);\n              setSearchAddress(fallbackAddress);\n              marker.bindPopup(`<b>Coordinates:</b><br>${fallbackAddress}`).openPopup();\n            }\n          } catch (error) {\n            console.error('Error getting address:', error);\n            const fallbackAddress = `Lat: ${lat.toFixed(6)}, Lng: ${lng.toFixed(6)}`;\n            setClickedAddress(fallbackAddress);\n            setSearchAddress(fallbackAddress);\n            marker.bindPopup(`<b>Coordinates:</b><br>${fallbackAddress}`).openPopup();\n          }\n        });\n\n        // Cleanup map on unmount\n        return () => {\n          map.remove();\n        };\n      } catch (error) {\n        console.error('Error initializing map:', error);\n      }\n    }, 100); // 100ms delay\n  }, []);\n\n  // Function to search address and show on map\n  const handleSearchAddress = async () => {\n    console.log('Search function called with:', searchAddress);\n    console.log('Map ref available:', !!mapRef.current);\n    \n    if (!searchAddress.trim()) {\n      console.log('Search address is empty');\n      return;\n    }\n    \n    if (!mapRef.current) {\n      console.error('Map not initialized yet');\n      setSearchError('Map not ready. Please wait a moment and try again.');\n      return;\n    }\n\n    setIsSearching(true);\n    setSearchError('');\n    setClickedAddress(''); // Clear any previously clicked address\n    \n    // Remove any existing marker when starting a new search\n    if (markerRef.current && mapRef.current) {\n      mapRef.current.removeLayer(markerRef.current);\n      markerRef.current = null;\n    }\n\n    try {\n      console.log('Searching for address:', searchAddress);\n      \n      // Try multiple geocoding services as fallback\n      let response, data;\n      \n      // First try OneMap Singapore with broader search\n      try {\n        response = await fetch(\n          `https://developers.onemap.sg/commonapi/search?searchVal=${encodeURIComponent(searchAddress)}&returnGeom=Y&getAddrDetails=Y&pageNum=1`\n        );\n        data = await response.json();\n      } catch (error) {\n        console.log('OneMap failed, trying OpenStreetMap...');\n        // Fallback to OpenStreetMap Nominatim\n        response = await fetch(\n          `https://nominatim.openstreetmap.org/search?q=${encodeURIComponent(searchAddress + ', Singapore')}&format=json&limit=10`\n        );\n        data = await response.json();\n      }\n      console.log('Search response:', data);\n      console.log('Number of results:', data.results ? data.results.length : data.length);\n\n      // Handle both OneMap and OpenStreetMap response formats\n      let lat, lng, address;\n      let isCommercial = false;\n      \n      if (data.results && data.results.length > 0) {\n        // OneMap format - prioritize commercial/industrial properties but accept all results\n        const commercialResults = data.results.filter(result => {\n          const address = result.ADDRESS || '';\n          const type = result.TYPE || '';\n          return address.toLowerCase().includes('office') || \n                 address.toLowerCase().includes('commercial') ||\n                 address.toLowerCase().includes('industrial') ||\n                 address.toLowerCase().includes('warehouse') ||\n                 address.toLowerCase().includes('factory') ||\n                 address.toLowerCase().includes('shop') ||\n                 address.toLowerCase().includes('mall') ||\n                 address.toLowerCase().includes('building') ||\n                 address.toLowerCase().includes('place') ||\n                 address.toLowerCase().includes('tower') ||\n                 address.toLowerCase().includes('centre') ||\n                 address.toLowerCase().includes('center') ||\n                 type.toLowerCase().includes('commercial') ||\n                 type.toLowerCase().includes('industrial');\n        });\n        \n        if (commercialResults.length > 0) {\n          const result = commercialResults[0];\n          lat = parseFloat(result.LATITUDE);\n          lng = parseFloat(result.LONGITUDE);\n          address = result.ADDRESS;\n          isCommercial = true;\n          console.log('Found commercial/industrial property:', address);\n        } else {\n          // Use first result if no commercial properties found\n          const result = data.results[0];\n          lat = parseFloat(result.LATITUDE);\n          lng = parseFloat(result.LONGITUDE);\n          address = result.ADDRESS;\n          console.log('Using first available result:', address);\n        }\n      } else if (data.length > 0) {\n        // OpenStreetMap format - prioritize commercial/industrial properties but accept all results\n        const commercialResults = data.filter(result => {\n          const displayName = result.display_name || '';\n          const type = result.type || '';\n          return displayName.toLowerCase().includes('office') || \n                 displayName.toLowerCase().includes('commercial') ||\n                 displayName.toLowerCase().includes('industrial') ||\n                 displayName.toLowerCase().includes('warehouse') ||\n                 displayName.toLowerCase().includes('factory') ||\n                 displayName.toLowerCase().includes('shop') ||\n                 displayName.toLowerCase().includes('mall') ||\n                 displayName.toLowerCase().includes('building') ||\n                 displayName.toLowerCase().includes('place') ||\n                 displayName.toLowerCase().includes('tower') ||\n                 displayName.toLowerCase().includes('centre') ||\n                 displayName.toLowerCase().includes('center') ||\n                 type.toLowerCase().includes('commercial') ||\n                 type.toLowerCase().includes('industrial');\n        });\n        \n        if (commercialResults.length > 0) {\n          const result = commercialResults[0];\n          lat = parseFloat(result.lat);\n          lng = parseFloat(result.lon);\n          address = result.display_name;\n          isCommercial = true;\n          console.log('Found commercial/industrial property:', address);\n        } else {\n          // Use first result if no commercial properties found\n          const result = data[0];\n          lat = parseFloat(result.lat);\n          lng = parseFloat(result.lon);\n          address = result.display_name;\n          console.log('Using first available result:', address);\n        }\n      }\n      \n      if (!lat || !lng || !address) {\n        console.error('No valid coordinates found for search:', searchAddress);\n        setSearchError('No results found for this address. Please try a different search term.');\n        setIsSearching(false);\n        return;\n      }\n\n      console.log('Found coordinates:', lat, lng, 'for address:', address);\n      console.log('Is commercial/industrial:', isCommercial);\n\n        // Remove previous marker if exists\n        if (markerRef.current) {\n          mapRef.current.removeLayer(markerRef.current);\n        }\n\n        // Add new marker\n        const marker = L.marker([lat, lng]).addTo(mapRef.current);\n        markerRef.current = marker;\n\n        // Center map on the found location\n        mapRef.current.setView([lat, lng], 18);\n\n        // Show popup with address and property type\n        const popupContent = isCommercial \n          ? `<b>üè¢ Commercial/Industrial Property</b><br>${address}`\n          : `<b>üìç Property Found</b><br>${address}<br><small>(May not be commercial/industrial)</small>`;\n        \n        marker.bindPopup(popupContent).openPopup();\n\n        setClickedAddress(address);\n        // Don't clear search input - keep it for reference\n    } catch (error) {\n      console.error('Error searching address:', error);\n      setSearchError(`Error searching address: ${error.message}`);\n    } finally {\n      setIsSearching(false);\n    }\n  };\n\n  // Function to handle Enter key press\n  const handleKeyPress = (e) => {\n    if (e.key === 'Enter') {\n      handleSearchAddress();\n    }\n  };\n\n  return (\n    <section className=\"explore\" id=\"intro\">\n      <h2 className=\"section-title\">Explore Automated Valuations</h2>\n      <p className=\"section-subtitle\">Estimate the value of your property now</p>\n      <div className=\"explore-types\">\n        <div className=\"type-pill\">\n          <img src=\"http://localhost:3845/assets/1f2c5cefac5c3b843f4e0ea23b4d6916bfbd2857.svg\" alt=\"Commercial\" />\n          <span>Commercial</span>\n        </div>\n        <div className=\"type-pill\">\n          <img src=\"http://localhost:3845/assets/a6a567e6434a0a9b58b53865a5cf0064ee43d31b.svg\" alt=\"Industrial\" />\n          <span>Industrial</span>\n        </div>\n      </div>\n      <div className=\"explore-grid\">\n        <div className=\"explore-form\">\n          <div className=\"form-row\">\n            <label>Address Search</label>\n            <div className=\"search-container\">\n              <input\n                type=\"text\"\n                className=\"search-input\"\n                placeholder=\"Enter Commercial/Industrial Property Address (e.g., Office, Warehouse, Factory)\"\n                value={searchAddress}\n                onChange={(e) => {\n                  setSearchAddress(e.target.value);\n                  if (e.target.value === '') {\n                    setSearchError('');\n                    setClickedAddress(''); // Clear selected location when search is cleared\n                    // Remove marker from map when search is cleared\n                    if (markerRef.current && mapRef.current) {\n                      mapRef.current.removeLayer(markerRef.current);\n                      markerRef.current = null;\n                    }\n                  }\n                }}\n                onKeyPress={handleKeyPress}\n                disabled={isSearching}\n              />\n              <button \n                className=\"search-btn\" \n                onClick={handleSearchAddress}\n                type=\"button\"\n                disabled={isSearching || !searchAddress.trim()}\n              >\n                {isSearching ? 'Searching...' : 'Search'}\n              </button>\n            </div>\n            {searchError && (\n              <div className=\"search-error\">\n                {searchError}\n              </div>\n            )}\n          </div>\n          {clickedAddress && (\n            <div className=\"form-row\">\n              <label>Selected Location</label>\n              <div className=\"selected-address\">\n                {clickedAddress}\n              </div>\n            </div>\n          )}\n          <div className=\"form-row two-cols\">\n            <div>\n              <label>Property Type</label>\n              <div className=\"input like-input\">Select Property Type</div>\n            </div>\n            <div>\n              <label>Floor Area</label>\n              <div className=\"input like-input\">Enter Floor Area</div>\n            </div>\n          </div>\n          <div className=\"form-row\">\n            <button className=\"btn btn-primary\">Predict Price</button>\n            <div className=\"hint\">Sign in to view full prediction and data insights.</div>\n          </div>\n        </div>\n        <div className=\"explore-image\">\n          <div id=\"mapdiv\" style={{ height: '400px' }}></div>\n          <div className=\"map-instructions\">\n            <p>üè¢ <strong>Commercial & Industrial Properties Only</strong></p>\n            <p>üí° Click on the map to find commercial areas, or search for specific addresses above</p>\n            <p><small>Focuses on offices, warehouses, factories, shops, malls, and commercial buildings</small></p>\n          </div>\n          <div className=\"map-debug\">\n            <button \n              type=\"button\" \n              className=\"debug-btn\"\n              onClick={() => {\n                console.log('Map ref:', mapRef.current);\n                console.log('Marker ref:', markerRef.current);\n                console.log('Current search address:', searchAddress);\n                console.log('Current clicked address:', clickedAddress);\n              }}\n            >\n              Debug Map State\n            </button>\n            <button \n              type=\"button\" \n              className=\"debug-btn\"\n              style={{ marginLeft: '0.5rem' }}\n              onClick={() => {\n                if (mapRef.current) {\n                  // Test map functionality without API calls\n                  const testLat = 1.2868108;\n                  const testLng = 103.8545349;\n                  const testAddress = 'Test Location (Orchard Road area)';\n                  \n                  // Remove previous marker if exists\n                  if (markerRef.current) {\n                    mapRef.current.removeLayer(markerRef.current);\n                  }\n                  \n                  // Add test marker\n                  const marker = L.marker([testLat, testLng]).addTo(mapRef.current);\n                  markerRef.current = marker;\n                  \n                  // Center map on test location\n                  mapRef.current.setView([testLat, testLng], 18);\n                  \n                  // Show popup\n                  marker.bindPopup(`<b>Test Address:</b><br>${testAddress}`).openPopup();\n                  \n                  setClickedAddress(testAddress);\n                  setSearchAddress(testAddress);\n                  \n                  console.log('Test marker added successfully');\n                }\n              }}\n            >\n              Test Map (No API)\n            </button>\n          </div>\n        </div>\n      </div>\n    </section>\n  );\n};\n\nexport default Explore;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
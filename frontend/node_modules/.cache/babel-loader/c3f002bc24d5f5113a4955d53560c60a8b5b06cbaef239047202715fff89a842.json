{"ast":null,"code":"// Google Custom Search API Service\n// Fetches real images from Google search results based on address\n\nclass GoogleSearchService {\n  constructor() {\n    this.apiKey = process.env.REACT_APP_GOOGLE_SEARCH_API_KEY;\n    this.searchEngineId = process.env.REACT_APP_GOOGLE_SEARCH_ENGINE_ID;\n    this.baseUrl = 'https://www.googleapis.com/customsearch/v1';\n  }\n\n  // Check if service is properly configured\n  isConfigured() {\n    return this.apiKey && this.searchEngineId;\n  }\n\n  // Get configuration status\n  getConfigStatus() {\n    return {\n      hasApiKey: !!this.apiKey,\n      hasSearchEngineId: !!this.searchEngineId,\n      isConfigured: this.isConfigured()\n    };\n  }\n\n  // Search for images using Google Custom Search\n  async searchImages(query, count = 5) {\n    if (!this.isConfigured()) {\n      console.warn('Google Search API not configured. Please set REACT_APP_GOOGLE_SEARCH_API_KEY and REACT_APP_GOOGLE_SEARCH_ENGINE_ID');\n      return null;\n    }\n    try {\n      const searchUrl = `${this.baseUrl}?key=${this.apiKey}&cx=${this.searchEngineId}&q=${encodeURIComponent(query)}&searchType=image&num=${count}&safe=active`;\n      console.log('Searching Google for:', query);\n      const response = await fetch(searchUrl);\n      if (!response.ok) {\n        throw new Error(`Google Search API error: ${response.status} ${response.statusText}`);\n      }\n      const data = await response.json();\n      if (data.items && data.items.length > 0) {\n        // Filter out irrelevant images and prioritize relevant ones\n        const filteredImages = data.items.filter(item => {\n          var _item$title, _item$image, _item$image$contextLi, _item$snippet;\n          const title = ((_item$title = item.title) === null || _item$title === void 0 ? void 0 : _item$title.toLowerCase()) || '';\n          const context = ((_item$image = item.image) === null || _item$image === void 0 ? void 0 : (_item$image$contextLi = _item$image.contextLink) === null || _item$image$contextLi === void 0 ? void 0 : _item$image$contextLi.toLowerCase()) || '';\n          const snippet = ((_item$snippet = item.snippet) === null || _item$snippet === void 0 ? void 0 : _item$snippet.toLowerCase()) || '';\n\n          // Filter out unwanted content\n          const unwantedKeywords = ['cannabis', 'marijuana', 'weed', 'drug', 'adult', 'porn', 'xxx', 'gambling', 'casino', 'betting', 'scam', 'fake', 'spam', 'youtube', 'video', 'thumbnail', 'preview', 'icon'];\n          const hasUnwantedContent = unwantedKeywords.some(keyword => title.includes(keyword) || context.includes(keyword) || snippet.includes(keyword));\n\n          // Prioritize images that contain address-related keywords\n          const addressKeywords = ['building', 'property', 'commercial', 'industrial', 'office', 'retail', 'warehouse'];\n          const hasAddressContent = addressKeywords.some(keyword => title.includes(keyword) || context.includes(keyword) || snippet.includes(keyword));\n          return !hasUnwantedContent && hasAddressContent;\n        });\n        if (filteredImages.length > 0) {\n          const images = filteredImages.map(item => {\n            var _item$image2, _item$image3;\n            return {\n              url: item.link,\n              thumbnail: (_item$image2 = item.image) === null || _item$image2 === void 0 ? void 0 : _item$image2.thumbnailLink,\n              title: item.title,\n              context: (_item$image3 = item.image) === null || _item$image3 === void 0 ? void 0 : _item$image3.contextLink,\n              snippet: item.snippet\n            };\n          });\n          console.log(`Found ${filteredImages.length} relevant images for query: ${query}`);\n          return images;\n        } else {\n          console.log(`All images filtered out for query: ${query}`);\n          return null;\n        }\n      }\n      console.log(`No images found for query: ${query}`);\n      return null;\n    } catch (error) {\n      console.error('Google Search API error:', error);\n      return null;\n    }\n  }\n\n  // Get the best image for a property address\n  async getPropertyImage(address, propertyType = '') {\n    try {\n      // Create multiple search queries for better results - more specific and relevant\n      const queries = [`\"${address}\" Singapore building`,\n      // Exact address match with quotes\n      `\"${address}\" property building`,\n      // Exact address + property\n      `${address} Singapore commercial building`,\n      // Address + location + commercial\n      `${propertyType} \"${address}\" Singapore`,\n      // Property type + exact address\n      `${address} Singapore ${propertyType}` // Address + location + type\n      ];\n\n      // Try each query until we find images\n      for (const query of queries) {\n        console.log(`Trying query: ${query}`);\n        const images = await this.searchImages(query, 3);\n        if (images && images.length > 0) {\n          // Find the most relevant image by checking title and snippet\n          let bestImage = images[0];\n          let bestScore = 0;\n          for (const image of images) {\n            var _image$title, _image$snippet;\n            let score = 0;\n            const title = ((_image$title = image.title) === null || _image$title === void 0 ? void 0 : _image$title.toLowerCase()) || '';\n            const snippet = ((_image$snippet = image.snippet) === null || _image$snippet === void 0 ? void 0 : _image$snippet.toLowerCase()) || '';\n\n            // Score based on relevance to address and property\n            if (title.includes('building') || snippet.includes('building')) score += 3;\n            if (title.includes('property') || snippet.includes('property')) score += 2;\n            if (title.includes('commercial') || snippet.includes('commercial')) score += 2;\n            if (title.includes('industrial') || snippet.includes('industrial')) score += 2;\n            if (title.includes('office') || snippet.includes('office')) score += 1;\n            if (title.includes('retail') || snippet.includes('retail')) score += 1;\n\n            // Penalize generic or irrelevant content\n            if (title.includes('youtube') || snippet.includes('youtube')) score -= 5;\n            if (title.includes('video') || snippet.includes('video')) score -= 3;\n            if (title.includes('thumbnail') || snippet.includes('thumbnail')) score -= 4;\n            if (score > bestScore) {\n              bestScore = score;\n              bestImage = image;\n            }\n          }\n          console.log(`Found best image for ${address} (score: ${bestScore}):`, bestImage.url);\n          return bestImage.url;\n        }\n      }\n      console.log(`No images found for any query for address: ${address}`);\n      return null;\n    } catch (error) {\n      console.error('Error getting property image:', error);\n      return null;\n    }\n  }\n\n  // Get comparison image for two addresses\n  async getComparisonImage(address1, address2) {\n    try {\n      var _images$;\n      // Try to get image for first address\n      let imageUrl = await this.getPropertyImage(address1);\n      if (imageUrl) {\n        return imageUrl;\n      }\n\n      // Fallback to second address\n      imageUrl = await this.getPropertyImage(address2);\n      if (imageUrl) {\n        return imageUrl;\n      }\n\n      // Final fallback to generic search\n      const images = await this.searchImages('Singapore industrial property building', 1);\n      return (images === null || images === void 0 ? void 0 : (_images$ = images[0]) === null || _images$ === void 0 ? void 0 : _images$.url) || null;\n    } catch (error) {\n      console.error('Error getting comparison image:', error);\n      return null;\n    }\n  }\n\n  // Get multiple images for a property (for galleries)\n  async getPropertyImages(address, propertyType = '', count = 5) {\n    try {\n      const query = `${propertyType} ${address} building`;\n      return await this.searchImages(query, count);\n    } catch (error) {\n      console.error('Error getting property images:', error);\n      return null;\n    }\n  }\n\n  // Test the service\n  async test() {\n    try {\n      console.log('Testing Google Search Service...');\n      const configStatus = this.getConfigStatus();\n      console.log('Configuration status:', configStatus);\n      if (!this.isConfigured()) {\n        console.warn('Service not configured - cannot test');\n        return false;\n      }\n      const testResult = await this.searchImages('Singapore industrial building', 1);\n      if (testResult && testResult.length > 0) {\n        console.log('✅ Google Search Service test successful:', testResult[0].url);\n        return true;\n      } else {\n        console.log('❌ Google Search Service test failed - no results');\n        return false;\n      }\n    } catch (error) {\n      console.error('❌ Google Search Service test failed:', error);\n      return false;\n    }\n  }\n}\nexport default GoogleSearchService;","map":{"version":3,"names":["GoogleSearchService","constructor","apiKey","process","env","REACT_APP_GOOGLE_SEARCH_API_KEY","searchEngineId","REACT_APP_GOOGLE_SEARCH_ENGINE_ID","baseUrl","isConfigured","getConfigStatus","hasApiKey","hasSearchEngineId","searchImages","query","count","console","warn","searchUrl","encodeURIComponent","log","response","fetch","ok","Error","status","statusText","data","json","items","length","filteredImages","filter","item","_item$title","_item$image","_item$image$contextLi","_item$snippet","title","toLowerCase","context","image","contextLink","snippet","unwantedKeywords","hasUnwantedContent","some","keyword","includes","addressKeywords","hasAddressContent","images","map","_item$image2","_item$image3","url","link","thumbnail","thumbnailLink","error","getPropertyImage","address","propertyType","queries","bestImage","bestScore","_image$title","_image$snippet","score","getComparisonImage","address1","address2","_images$","imageUrl","getPropertyImages","test","configStatus","testResult"],"sources":["C:/Users/mandy/Downloads/fyp-app/fyp-app/frontend/src/services/googleSearch.js"],"sourcesContent":["// Google Custom Search API Service\r\n// Fetches real images from Google search results based on address\r\n\r\nclass GoogleSearchService {\r\n  constructor() {\r\n    this.apiKey = process.env.REACT_APP_GOOGLE_SEARCH_API_KEY;\r\n    this.searchEngineId = process.env.REACT_APP_GOOGLE_SEARCH_ENGINE_ID;\r\n    this.baseUrl = 'https://www.googleapis.com/customsearch/v1';\r\n  }\r\n\r\n  // Check if service is properly configured\r\n  isConfigured() {\r\n    return this.apiKey && this.searchEngineId;\r\n  }\r\n\r\n  // Get configuration status\r\n  getConfigStatus() {\r\n    return {\r\n      hasApiKey: !!this.apiKey,\r\n      hasSearchEngineId: !!this.searchEngineId,\r\n      isConfigured: this.isConfigured()\r\n    };\r\n  }\r\n\r\n  // Search for images using Google Custom Search\r\n  async searchImages(query, count = 5) {\r\n    if (!this.isConfigured()) {\r\n      console.warn('Google Search API not configured. Please set REACT_APP_GOOGLE_SEARCH_API_KEY and REACT_APP_GOOGLE_SEARCH_ENGINE_ID');\r\n      return null;\r\n    }\r\n\r\n    try {\r\n      const searchUrl = `${this.baseUrl}?key=${this.apiKey}&cx=${this.searchEngineId}&q=${encodeURIComponent(query)}&searchType=image&num=${count}&safe=active`;\r\n      \r\n      console.log('Searching Google for:', query);\r\n      const response = await fetch(searchUrl);\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`Google Search API error: ${response.status} ${response.statusText}`);\r\n      }\r\n      \r\n      const data = await response.json();\r\n      \r\n      if (data.items && data.items.length > 0) {\r\n        // Filter out irrelevant images and prioritize relevant ones\r\n        const filteredImages = data.items.filter(item => {\r\n          const title = item.title?.toLowerCase() || '';\r\n          const context = item.image?.contextLink?.toLowerCase() || '';\r\n          const snippet = item.snippet?.toLowerCase() || '';\r\n          \r\n          // Filter out unwanted content\r\n          const unwantedKeywords = [\r\n            'cannabis', 'marijuana', 'weed', 'drug', 'adult', 'porn', 'xxx',\r\n            'gambling', 'casino', 'betting', 'scam', 'fake', 'spam', 'youtube',\r\n            'video', 'thumbnail', 'preview', 'icon'\r\n          ];\r\n          \r\n          const hasUnwantedContent = unwantedKeywords.some(keyword => \r\n            title.includes(keyword) || context.includes(keyword) || snippet.includes(keyword)\r\n          );\r\n          \r\n          // Prioritize images that contain address-related keywords\r\n          const addressKeywords = ['building', 'property', 'commercial', 'industrial', 'office', 'retail', 'warehouse'];\r\n          const hasAddressContent = addressKeywords.some(keyword => \r\n            title.includes(keyword) || context.includes(keyword) || snippet.includes(keyword)\r\n          );\r\n          \r\n          return !hasUnwantedContent && hasAddressContent;\r\n        });\r\n        \r\n        if (filteredImages.length > 0) {\r\n          const images = filteredImages.map(item => ({\r\n            url: item.link,\r\n            thumbnail: item.image?.thumbnailLink,\r\n            title: item.title,\r\n            context: item.image?.contextLink,\r\n            snippet: item.snippet\r\n          }));\r\n          \r\n          console.log(`Found ${filteredImages.length} relevant images for query: ${query}`);\r\n          return images;\r\n        } else {\r\n          console.log(`All images filtered out for query: ${query}`);\r\n          return null;\r\n        }\r\n      }\r\n      \r\n      console.log(`No images found for query: ${query}`);\r\n      return null;\r\n      \r\n    } catch (error) {\r\n      console.error('Google Search API error:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // Get the best image for a property address\r\n  async getPropertyImage(address, propertyType = '') {\r\n    try {\r\n      // Create multiple search queries for better results - more specific and relevant\r\n      const queries = [\r\n        `\"${address}\" Singapore building`,                // Exact address match with quotes\r\n        `\"${address}\" property building`,                 // Exact address + property\r\n        `${address} Singapore commercial building`,        // Address + location + commercial\r\n        `${propertyType} \"${address}\" Singapore`,         // Property type + exact address\r\n        `${address} Singapore ${propertyType}`,            // Address + location + type\r\n      ];\r\n\r\n      // Try each query until we find images\r\n      for (const query of queries) {\r\n        console.log(`Trying query: ${query}`);\r\n        const images = await this.searchImages(query, 3);\r\n        \r\n        if (images && images.length > 0) {\r\n          // Find the most relevant image by checking title and snippet\r\n          let bestImage = images[0];\r\n          let bestScore = 0;\r\n          \r\n          for (const image of images) {\r\n            let score = 0;\r\n            const title = image.title?.toLowerCase() || '';\r\n            const snippet = image.snippet?.toLowerCase() || '';\r\n            \r\n            // Score based on relevance to address and property\r\n            if (title.includes('building') || snippet.includes('building')) score += 3;\r\n            if (title.includes('property') || snippet.includes('property')) score += 2;\r\n            if (title.includes('commercial') || snippet.includes('commercial')) score += 2;\r\n            if (title.includes('industrial') || snippet.includes('industrial')) score += 2;\r\n            if (title.includes('office') || snippet.includes('office')) score += 1;\r\n            if (title.includes('retail') || snippet.includes('retail')) score += 1;\r\n            \r\n            // Penalize generic or irrelevant content\r\n            if (title.includes('youtube') || snippet.includes('youtube')) score -= 5;\r\n            if (title.includes('video') || snippet.includes('video')) score -= 3;\r\n            if (title.includes('thumbnail') || snippet.includes('thumbnail')) score -= 4;\r\n            \r\n            if (score > bestScore) {\r\n              bestScore = score;\r\n              bestImage = image;\r\n            }\r\n          }\r\n          \r\n          console.log(`Found best image for ${address} (score: ${bestScore}):`, bestImage.url);\r\n          return bestImage.url;\r\n        }\r\n      }\r\n      \r\n      console.log(`No images found for any query for address: ${address}`);\r\n      return null;\r\n      \r\n    } catch (error) {\r\n      console.error('Error getting property image:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // Get comparison image for two addresses\r\n  async getComparisonImage(address1, address2) {\r\n    try {\r\n      // Try to get image for first address\r\n      let imageUrl = await this.getPropertyImage(address1);\r\n      if (imageUrl) {\r\n        return imageUrl;\r\n      }\r\n      \r\n      // Fallback to second address\r\n      imageUrl = await this.getPropertyImage(address2);\r\n      if (imageUrl) {\r\n        return imageUrl;\r\n      }\r\n      \r\n      // Final fallback to generic search\r\n      const images = await this.searchImages('Singapore industrial property building', 1);\r\n      return images?.[0]?.url || null;\r\n      \r\n    } catch (error) {\r\n      console.error('Error getting comparison image:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // Get multiple images for a property (for galleries)\r\n  async getPropertyImages(address, propertyType = '', count = 5) {\r\n    try {\r\n      const query = `${propertyType} ${address} building`;\r\n      return await this.searchImages(query, count);\r\n    } catch (error) {\r\n      console.error('Error getting property images:', error);\r\n      return null;\r\n    }\r\n  }\r\n\r\n  // Test the service\r\n  async test() {\r\n    try {\r\n      console.log('Testing Google Search Service...');\r\n      const configStatus = this.getConfigStatus();\r\n      console.log('Configuration status:', configStatus);\r\n      \r\n      if (!this.isConfigured()) {\r\n        console.warn('Service not configured - cannot test');\r\n        return false;\r\n      }\r\n      \r\n      const testResult = await this.searchImages('Singapore industrial building', 1);\r\n      if (testResult && testResult.length > 0) {\r\n        console.log('✅ Google Search Service test successful:', testResult[0].url);\r\n        return true;\r\n      } else {\r\n        console.log('❌ Google Search Service test failed - no results');\r\n        return false;\r\n      }\r\n      \r\n    } catch (error) {\r\n      console.error('❌ Google Search Service test failed:', error);\r\n      return false;\r\n    }\r\n  }\r\n}\r\n\r\nexport default GoogleSearchService;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}